<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FiveM Premium Phone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --accent: #00d9ff;
            --accent-dim: rgba(0, 217, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --danger: #ff3b5c;
            --success: #00ff88;
            --warning: #ffaa00;
            --orange: #ff9800;
        }

        body {
            display: none;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: transparent;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow: hidden;
        }

        #phone-wrapper {
            width: 400px;
            height: 850px;
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            border-radius: 45px;
            padding: 12px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.9), inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            position: relative;
        }

        #phone-screen {
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            border-radius: 38px;
            overflow: hidden;
            position: relative;
        }

        /* Status Bar */
        #status-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            padding: 0 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-primary);
            font-size: 13px;
            font-weight: 500;
            z-index: 100;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
        }

        .status-left { display: flex; gap: 12px; align-items: center; }
        .status-right { display: flex; gap: 8px; align-items: center; }
        .status-icon { font-size: 12px; }

        /* Dynamic Island */
        #dynamic-island {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            background: #000;
            border-radius: 25px;
            padding: 8px 20px;
            display: none;
            align-items: center;
            gap: 12px;
            z-index: 150;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #dynamic-island.active {
            display: flex;
            animation: islandExpand 0.3s ease;
        }

        @keyframes islandExpand {
            from { width: 120px; opacity: 0; }
            to { width: auto; opacity: 1; }
        }

        .island-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success), #00c853);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .island-content {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .island-title {
            font-size: 12px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .island-subtitle {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .island-end-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--danger);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-left: 8px;
        }

        .island-end-btn:active { transform: scale(0.9); }

        /* Container for all screens */
        #screen-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Home Screen */
        #home-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            transition: opacity 0.3s ease;
        }

        #home-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        #wallpaper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0.15;
            z-index: 0;
        }

        #home-content {
            flex: 1;
            padding: 70px 20px 120px 20px;
            position: relative;
            z-index: 1;
            overflow-y: auto;
        }

        #home-content::-webkit-scrollbar { width: 0; }

        #apps-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .app {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .app:active { transform: scale(0.88); }

        .app-icon {
            width: 65px;
            height: 65px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 8px;
            position: relative;
            background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        .app-name {
            font-size: 12px;
            color: var(--text-primary);
            text-align: center;
            font-weight: 500;
        }

        .app-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 12px;
            min-width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            border: 2px solid var(--bg-primary);
            box-shadow: 0 2px 8px rgba(255, 59, 92, 0.4);
        }

        /* Dock */
        #dock {
            position: absolute;
            bottom: 30px;
            left: 20px;
            right: 20px;
            height: 80px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(40px);
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
            z-index: 90;
        }

        .dock-app {
            width: 58px;
            height: 58px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            cursor: pointer;
            transition: transform 0.2s ease;
            background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.2);
        }

        .dock-app:active { transform: scale(0.9); }

        /* App View */
        .app-view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            display: none;
            flex-direction: column;
            z-index: 80;
        }

        .app-view.active {
            display: flex;
            animation: slideUp 0.35s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .app-header {
            height: 65px;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 10;
            flex-shrink: 0;
        }

        .app-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .app-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .app-content::-webkit-scrollbar { width: 4px; }
        .app-content::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }

        /* Tabs */
        .tab-nav {
            display: flex;
            gap: 8px;
            padding: 15px 20px 0 20px;
            background: var(--bg-primary);
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tab-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            color: var(--accent);
            margin-bottom: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-dim);
        }

        .form-textarea {
            resize: none;
            min-height: 100px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #00b8d4);
            color: white;
            box-shadow: 0 4px 16px rgba(0, 217, 255, 0.3);
        }

        .btn-primary:active { transform: scale(0.97); }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #d32f4f);
            color: white;
            box-shadow: 0 4px 16px rgba(255, 59, 92, 0.3);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* List Items */
        .list-item {
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .list-item:hover { background: var(--bg-tertiary); }
        .list-item:active { transform: scale(0.98); }

        .list-item-main { flex: 1; }

        .list-item-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .list-item-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .list-item-value {
            font-size: 16px;
            font-weight: 700;
            color: var(--accent);
        }

        /* Dialpad */
        .dialpad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .dial-btn {
            aspect-ratio: 1;
            background: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }

        .dial-btn:active {
            background: var(--bg-tertiary);
            transform: scale(0.95);
        }

        .dial-num {
            font-size: 28px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .dial-letters {
            font-size: 10px;
            color: var(--text-secondary);
            margin-top: 2px;
            text-transform: uppercase;
        }

        .widget {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .widget-header {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .widget-balance {
            font-size: 36px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        /* Message Bubbles */
        .message-bubble {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 18px;
            margin-bottom: 8px;
            word-wrap: break-word;
        }

        .message-received {
            background: var(--bg-secondary);
            color: var(--text-primary);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .message-sent {
            background: var(--accent);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .message-time {
            font-size: 10px;
            opacity: 0.7;
            margin-top: 4px;
        }

        .messages-container {
            display: flex;
            flex-direction: column;
            gap: 4px;
            padding: 10px 0;
        }

        .message-input-container {
            position: sticky;
            bottom: 0;
            background: var(--bg-primary);
            padding: 15px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 10px;
        }

        /* Food Ferry Specific Styles */
        .food-header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--orange), #ff5722);
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .food-header i {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .food-header h2 {
            font-size: 24px;
            margin: 0;
        }

        .food-header p {
            font-size: 14px;
            opacity: 0.9;
            margin: 5px 0 0 0;
        }

        .food-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 12px;
        }

        .food-stat {
            text-align: center;
        }

        .food-stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--warning);
        }

        .food-stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Modal */
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 30px;
            max-width: 85%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .modal-message {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 24px;
            line-height: 1.5;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
        }

        .modal-actions .btn { margin: 0; }

        /* App-specific colors */
        .app-phone .app-icon { background: linear-gradient(135deg, #667eea, #764ba2); }
        .app-messages .app-icon { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .app-bank .app-icon { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .app-camera .app-icon { background: linear-gradient(135deg, #43e97b, #38f9d7); }
        .app-twitter .app-icon { background: linear-gradient(135deg, #1DA1F2, #0d8bd9); }
        .app-ping .app-icon { background: linear-gradient(135deg, #fa709a, #fee140); }
        .app-job .app-icon { background: linear-gradient(135deg, #30cfd0, #330867); }
        .app-food .app-icon { background: linear-gradient(135deg, #ff9a56, #ff6a88); }
        .app-requestee .app-icon { background: linear-gradient(135deg, #ff6b6b, #ee5a6f); }
        .app-settings .app-icon { background: linear-gradient(135deg, #6c757d, #5a6268); }

        /* Gesture Bar */
        #gesture {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            cursor: pointer;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="phone-wrapper">
        <div id="phone-screen">
            <div id="status-bar">
                <div class="status-left">
                    <span id="time">18:57</span>
                </div>
                <div class="status-right">
                    <i class="fas fa-signal status-icon"></i>
                    <i class="fas fa-wifi status-icon"></i>
                    <span><i class="fas fa-battery-three-quarters"></i> 92%</span>
                </div>
            </div>

            <!-- Dynamic Island -->
            <div id="dynamic-island">
                <div class="island-icon">
                    <i class="fas fa-phone-alt"></i>
                </div>
                <div class="island-content">
                    <div class="island-title" id="island-title">Calling...</div>
                    <div class="island-subtitle" id="island-subtitle">555-0123</div>
                </div>
                <div class="island-end-btn" id="island-end-call">
                    <i class="fas fa-phone-slash" style="font-size: 14px;"></i>
                </div>
            </div>

            <div id="screen-container">
                <!-- Home Screen -->
                <div id="home-screen">
                    <div id="wallpaper"></div>
                    <div id="home-content">
                        <div id="apps-grid">
                            <div class="app app-phone" data-app="phone">
                                <div class="app-icon"><i class="fas fa-phone-alt"></i></div>
                                <div class="app-name">Phone</div>
                            </div>
                            <div class="app app-messages" data-app="messages">
                                <div class="app-icon">
                                    <i class="fas fa-comment-dots"></i>
                                    <div class="app-badge">5</div>
                                </div>
                                <div class="app-name">Messages</div>
                            </div>
                            <div class="app app-bank" data-app="bank">
                                <div class="app-icon"><i class="fas fa-university"></i></div>
                                <div class="app-name">Bank</div>
                            </div>
                            <div class="app app-camera" data-app="camera">
                                <div class="app-icon"><i class="fas fa-camera"></i></div>
                                <div class="app-name">Camera</div>
                            </div>
                            <div class="app app-twitter" data-app="twitter">
                                <div class="app-icon"><i class="fab fa-twitter"></i></div>
                                <div class="app-name">Tweeter</div>
                            </div>
                            <div class="app app-ping" data-app="ping">
                                <div class="app-icon"><i class="fas fa-map-marker-alt"></i></div>
                                <div class="app-name">Pingr</div>
                            </div>
                            <div class="app app-job" data-app="job">
                                <div class="app-icon"><i class="fas fa-briefcase"></i></div>
                                <div class="app-name">Jobs</div>
                            </div>
                            <div class="app app-food" data-app="food">
                                <div class="app-icon"><i class="fas fa-utensils"></i></div>
                                <div class="app-name">Food Ferry</div>
                            </div>
                            <div class="app app-requestee" data-app="requestee">
                                <div class="app-icon"><i class="fas fa-hands-helping"></i></div>
                                <div class="app-name">Requestee</div>
                            </div>
                            <div class="app app-settings" data-app="settings">
                                <div class="app-icon"><i class="fas fa-cog"></i></div>
                                <div class="app-name">Settings</div>
                            </div>
                        </div>
                    </div>

                    <div id="dock">
                        <div class="dock-app app-phone" data-app="phone" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div class="dock-app app-messages" data-app="messages" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                            <i class="fas fa-comment-dots"></i>
                        </div>
                        <div class="dock-app app-bank" data-app="bank" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="dock-app app-camera" data-app="camera" style="background: linear-gradient(135deg, #43e97b, #38f9d7);">
                            <i class="fas fa-camera"></i>
                        </div>
                    </div>
                </div>

                <!-- Phone App -->
                <div class="app-view" id="phone-app">
                    <div class="app-header">
                        <div class="app-title">Phone</div>
                    </div>
                    <div class="tab-nav">
                        <button class="tab-btn active" data-tab="dialpad">Dialpad</button>
                        <button class="tab-btn" data-tab="contacts">Contacts</button>
                        <button class="tab-btn" data-tab="recents">Recents</button>
                    </div>
                    <div class="app-content">
                        <!-- Dialpad Tab -->
                        <div class="tab-content active" id="dialpad">
                            <div class="form-group">
                                <input type="text" class="form-input" id="phone-input" placeholder="Enter phone number" readonly>
                            </div>
                            <div class="dialpad">
                                <div class="dial-btn" data-num="1"><span class="dial-num">1</span></div>
                                <div class="dial-btn" data-num="2"><span class="dial-num">2</span><span class="dial-letters">ABC</span></div>
                                <div class="dial-btn" data-num="3"><span class="dial-num">3</span><span class="dial-letters">DEF</span></div>
                                <div class="dial-btn" data-num="4"><span class="dial-num">4</span><span class="dial-letters">GHI</span></div>
                                <div class="dial-btn" data-num="5"><span class="dial-num">5</span><span class="dial-letters">JKL</span></div>
                                <div class="dial-btn" data-num="6"><span class="dial-num">6</span><span class="dial-letters">MNO</span></div>
                                <div class="dial-btn" data-num="7"><span class="dial-num">7</span><span class="dial-letters">PQRS</span></div>
                                <div class="dial-btn" data-num="8"><span class="dial-num">8</span><span class="dial-letters">TUV</span></div>
                                <div class="dial-btn" data-num="9"><span class="dial-num">9</span><span class="dial-letters">WXYZ</span></div>
                                <div class="dial-btn" data-num="*"><span class="dial-num">*</span></div>
                                <div class="dial-btn" data-num="0"><span class="dial-num">0</span><span class="dial-letters">+</span></div>
                                <div class="dial-btn" data-num="#"><span class="dial-num">#</span></div>
                            </div>
                            <div style="display: flex; gap: 12px; margin-top: 20px;">
                                <button class="btn btn-primary" id="call-btn" style="flex: 2;">
                                    <i class="fas fa-phone-alt"></i> Call
                                </button>
                                <button class="btn btn-secondary" id="clear-btn" style="flex: 1;">
                                    <i class="fas fa-backspace"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Contacts Tab -->
                        <div class="tab-content" id="contacts">
                            <div class="form-group">
                                <input type="text" class="form-input" id="contact-search" placeholder="Search contacts...">
                            </div>
                            <div id="contacts-list">
                                <div class="list-item contact-item" data-number="555-0101" data-name="Adam Smith">
                                    <div class="list-item-main">
                                        <div class="list-item-title">Adam Smith</div>
                                        <div class="list-item-subtitle">555-0101</div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button class="btn btn-secondary contact-call" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-phone"></i>
                                        </button>
                                        <button class="btn btn-secondary contact-message" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-comment"></i>
                                        </button>
                                        <button class="btn btn-danger contact-delete" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="list-item contact-item" data-number="555-0202" data-name="Jane Doe">
                                    <div class="list-item-main">
                                        <div class="list-item-title">Jane Doe</div>
                                        <div class="list-item-subtitle">555-0202</div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button class="btn btn-secondary contact-call" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-phone"></i>
                                        </button>
                                        <button class="btn btn-secondary contact-message" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-comment"></i>
                                        </button>
                                        <button class="btn btn-danger contact-delete" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="list-item contact-item" data-number="555-0303" data-name="Mechanic Mike">
                                    <div class="list-item-main">
                                        <div class="list-item-title">Mechanic Mike</div>
                                        <div class="list-item-subtitle">555-0303</div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button class="btn btn-secondary contact-call" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-phone"></i>
                                        </button>
                                        <button class="btn btn-secondary contact-message" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-comment"></i>
                                        </button>
                                        <button class="btn btn-danger contact-delete" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="list-item contact-item" data-number="911" data-name="Emergency Services">
                                    <div class="list-item-main">
                                        <div class="list-item-title">Emergency Services</div>
                                        <div class="list-item-subtitle">911</div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <button class="btn btn-danger contact-call" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                            <i class="fas fa-phone"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recents Tab -->
                        <div class="tab-content" id="recents">
                            <div id="recents-list">
                                <div class="list-item recent-call" data-number="555-0202">
                                    <div class="list-item-main">
                                        <div class="list-item-title">
                                            <i class="fas fa-phone-slash" style="color: var(--danger); font-size: 12px; margin-right: 8px;"></i>
                                            Jane Doe
                                        </div>
                                        <div class="list-item-subtitle">Missed • Today, 10:30 AM</div>
                                    </div>
                                    <button class="btn btn-secondary" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                        <i class="fas fa-phone"></i>
                                    </button>
                                </div>
                                <div class="list-item recent-call" data-number="555-0101">
                                    <div class="list-item-main">
                                        <div class="list-item-title">
                                            <i class="fas fa-phone" style="color: var(--success); font-size: 12px; margin-right: 8px;"></i>
                                            Adam Smith
                                        </div>
                                        <div class="list-item-subtitle">Outgoing • Yesterday, 3:15 PM</div>
                                    </div>
                                    <button class="btn btn-secondary" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                        <i class="fas fa-phone"></i>
                                    </button>
                                </div>
                                <div class="list-item recent-call" data-number="555-0303">
                                    <div class="list-item-main">
                                        <div class="list-item-title">
                                            <i class="fas fa-phone" style="color: var(--accent); font-size: 12px; margin-right: 8px;"></i>
                                            Mechanic Mike
                                        </div>
                                        <div class="list-item-subtitle">Incoming • 2 days ago</div>
                                    </div>
                                    <button class="btn btn-secondary" style="width: 40px; height: 40px; padding: 0; margin: 0;">
                                        <i class="fas fa-phone"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Messages App -->
                <div class="app-view" id="messages-app">
                    <div class="app-header">
                        <div class="app-title">Messages</div>
                    </div>
                    <div class="app-content" id="messages-list-view">
                        <div class="form-group">
                            <input type="text" class="form-input" id="message-search" placeholder="Search messages...">
                        </div>

                        <div class="list-item message-thread" data-contact="Jane Doe" data-number="555-0202">
                            <div class="list-item-main">
                                <div class="list-item-title">Jane Doe</div>
                                <div class="list-item-subtitle">Just got the car back, thanks!</div>
                            </div>
                            <div style="color: var(--text-secondary); font-size: 12px;">2m</div>
                        </div>

                        <div class="list-item message-thread" data-contact="Mechanic Mike" data-number="555-0303">
                            <div class="list-item-main">
                                <div class="list-item-title">Mechanic Mike</div>
                                <div class="list-item-subtitle">Sure, I'm free now</div>
                            </div>
                            <div style="color: var(--text-secondary); font-size: 12px;">15m</div>
                        </div>

                        <div class="list-item message-thread" data-contact="Casino Royale" data-number="555-9999">
                            <div class="list-item-main">
                                <div class="list-item-title">Casino Royale</div>
                                <div class="list-item-subtitle">You won $1,000,000!</div>
                            </div>
                            <div style="color: var(--text-secondary); font-size: 12px;">1h</div>
                        </div>

                        <div class="list-item message-thread" data-contact="Adam Smith" data-number="555-0101">
                            <div class="list-item-main">
                                <div class="list-item-title">Adam Smith</div>
                                <div class="list-item-subtitle">See you at the meeting</div>
                            </div>
                            <div style="color: var(--text-secondary); font-size: 12px;">3h</div>
                        </div>
                    </div>

                    <!-- Conversation View -->
                    <div class="app-content" id="conversation-view" style="display: none; padding: 20px; flex-direction: column;">
                        <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <button class="btn btn-secondary" id="back-to-messages" style="width: auto; padding: 8px 16px; margin: 0 0 10px 0;">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                            <h3 id="conversation-contact" style="color: var(--text-primary); margin: 0;">Jane Doe</h3>
                            <p id="conversation-number" style="color: var(--text-secondary); font-size: 13px; margin: 5px 0 0 0;">555-0202</p>
                        </div>

                        <div class="messages-container" id="messages-container" style="flex: 1; overflow-y: auto;">
                            <!-- Messages populated dynamically -->
                        </div>

                        <div class="message-input-container">
                            <input type="text" class="form-input" id="message-input" placeholder="Type a message..." style="flex: 1; margin: 0;">
                            <button class="btn btn-primary" id="send-message" style="width: auto; padding: 0 20px; margin: 0;">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bank App -->
                <div class="app-view" id="bank-app">
                    <div class="app-header">
                        <div class="app-title">Banking</div>
                    </div>
                    <div class="app-content">
                        <div class="widget" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                            <div class="widget-header" style="color: rgba(255,255,255,0.8);">Total Balance</div>
                            <div class="widget-balance">$16,250</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Recipient ID</label>
                            <input type="text" class="form-input" id="transfer-id" placeholder="Enter player or account ID">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Amount</label>
                            <input type="number" class="form-input" id="transfer-amount" placeholder="$0.00">
                        </div>

                        <button class="btn btn-primary" id="transfer-btn">
                            <i class="fas fa-paper-plane"></i> Send Money
                        </button>

                        <h3 style="color: var(--text-secondary); margin: 30px 0 15px; font-size: 13px; text-transform: uppercase; letter-spacing: 1px;">Recent Transactions</h3>

                        <div class="list-item">
                            <div class="list-item-main">
                                <div class="list-item-title">Jane Doe</div>
                                <div class="list-item-subtitle">Yesterday, 3:42 PM</div>
                            </div>
                            <div class="list-item-value" style="color: var(--danger);">-$500</div>
                        </div>

                        <div class="list-item">
                            <div class="list-item-main">
                                <div class="list-item-title">Taxi Payment</div>
                                <div class="list-item-subtitle">Today, 10:15 AM</div>
                            </div>
                            <div class="list-item-value" style="color: var(--success);">+$150</div>
                        </div>
                    </div>
                </div>

                <!-- Camera App -->
                <div class="app-view" id="camera-app">
                    <div class="app-header">
                        <div class="app-title">Camera</div>
                    </div>
                    <div class="app-content" style="padding: 0; display: flex; flex-direction: column; height: 100%;">
                        <div style="flex: 1; background: #000; display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 20px;">
                            <i class="fas fa-camera" style="font-size: 64px; color: #555;"></i>
                            <p style="color: #555; font-size: 14px;">Camera feed would appear here</p>
                        </div>
                        <div style="height: 120px; background: var(--bg-secondary); display: flex; justify-content: space-around; align-items: center; padding: 20px;">
                            <button class="btn btn-secondary" style="width: 60px; height: 60px; padding: 0; border-radius: 50%;">
                                <i class="fas fa-images"></i>
                            </button>
                            <button class="btn btn-primary" style="width: 70px; height: 70px; padding: 0; border-radius: 50%;">
                                <i class="fas fa-circle" style="font-size: 24px;"></i>
                            </button>
                            <button class="btn btn-secondary" style="width: 60px; height: 60px; padding: 0; border-radius: 50%;">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Twitter App -->
                <div class="app-view" id="twitter-app">
                    <div class="app-header">
                        <div class="app-title">Tweeter</div>
                    </div>
                    <div class="app-content">
                        <div class="form-group">
                            <textarea class="form-textarea" id="tweet-text" placeholder="What's happening in Los Santos?" maxlength="280"></textarea>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                                <span id="tweet-count" style="font-size: 12px; color: var(--text-secondary);">0/280</span>
                                <button class="btn btn-primary" id="post-tweet" style="width: auto; padding: 10px 24px; margin: 0;">Tweet</button>
                            </div>
                        </div>

                        <h3 style="color: var(--text-secondary); margin: 20px 0 15px; font-size: 13px; text-transform: uppercase; letter-spacing: 1px;">Feed</h3>

                        <div class="list-item" style="flex-direction: column; align-items: flex-start;">
                            <div style="display: flex; justify-content: space-between; width: 100%; margin-bottom: 8px;">
                                <span style="color: var(--accent); font-weight: 600;">@FastDriver42</span>
                                <span style="color: var(--text-secondary); font-size: 12px;">5m ago</span>
                            </div>
                            <p style="color: var(--text-primary); margin: 0;">The highways are totally clear tonight! Perfect for a cruise. #LSStreets</p>
                        </div>

                        <div class="list-item" style="flex-direction: column; align-items: flex-start;">
                            <div style="display: flex; justify-content: space-between; width: 100%; margin-bottom: 8px;">
                                <span style="color: var(--accent); font-weight: 600;">@LSPDBoss</span>
                                <span style="color: var(--text-secondary); font-size: 12px;">1h ago</span>
                            </div>
                            <p style="color: var(--text-primary); margin: 0;">Reminder: Do not call 911 for pizza deliveries. We will find you.</p>
                        </div>
                    </div>
                </div>

                <!-- Ping App -->
                <div class="app-view" id="ping-app">
                    <div class="app-header">
                        <div class="app-title">Pingr</div>
                    </div>
                    <div class="app-content">
                        <p style="color: var(--text-secondary); margin-bottom: 20px; line-height: 1.6;">Send your current GPS location to another player.</p>

                        <div class="form-group">
                            <label class="form-label">Target Player ID</label>
                            <input type="number" class="form-input" id="ping-target" placeholder="Enter player ID (e.g., 42)">
                        </div>

                        <button class="btn btn-primary" id="send-ping">
                            <i class="fas fa-location-arrow"></i> Send My Location
                        </button>

                        <h3 style="color: var(--text-secondary); margin: 30px 0 15px; font-size: 13px; text-transform: uppercase; letter-spacing: 1px;">Received Pings</h3>

                        <div class="list-item">
                            <div class="list-item-main">
                                <div class="list-item-title">Player #12</div>
                                <div class="list-item-subtitle">Legion Square</div>
                            </div>
                            <button class="btn btn-secondary" style="width: auto; padding: 8px 16px; margin: 0;">
                                <i class="fas fa-map-marked-alt"></i>
                            </button>
                        </div>

                        <div class="list-item">
                            <div class="list-item-main">
                                <div class="list-item-title">Adam Smith</div>
                                <div class="list-item-subtitle">Vinewood Hills</div>
                            </div>
                            <button class="btn btn-secondary" style="width: auto; padding: 8px 16px; margin: 0;">
                                <i class="fas fa-map-marked-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Job App -->
                <div class="app-view" id="job-app">
                    <div class="app-header">
                        <div class="app-title">Job Center</div>
                    </div>
                    <div class="app-content">
                        <!-- Primary Job -->
                        <div class="widget" style="background: linear-gradient(135deg, #30cfd0, #330867);">
                            <div class="widget-header" style="color: rgba(255,255,255,0.8);">Primary Job</div>
                            <div class="widget-balance" style="font-size: 28px;">Taxi Driver</div>
                            <div style="margin-top: 10px;">
                                <select class="form-select" id="job-status-primary" style="background: rgba(0,0,0,0.2); border-color: rgba(255,255,255,0.2);">
                                    <option value="on">On Duty</option>
                                    <option value="off">Off Duty</option>
                                </select>
                            </div>
                        </div>

                        <!-- Secondary Job -->
                        <div class="widget" style="background: linear-gradient(135deg, #667eea, #764ba2); margin-top: 15px;">
                            <div class="widget-header" style="color: rgba(255,255,255,0.8);">Secondary Job</div>
                            <div class="widget-balance" style="font-size: 28px;">Mechanic</div>
                            <div style="margin-top: 10px;">
                                <select class="form-select" id="job-status-secondary" style="background: rgba(0,0,0,0.2); border-color: rgba(255,255,255,0.2);">
                                    <option value="on">On Duty</option>
                                    <option value="off">Off Duty</option>
                                </select>
                            </div>
                        </div>

                        <h3 style="color: var(--text-secondary); margin: 25px 0 15px; font-size: 13px; text-transform: uppercase; letter-spacing: 1px;">Job Actions</h3>

                        <div class="form-group">
                            <label class="form-label">Select Action</label>
                            <select class="form-select" id="job-action-select">
                                <option value="">Choose an action...</option>
                                <option value="bill">Bill Customer</option>
                                <option value="hire">Hire Employee</option>
                                <option value="fire">Fire Employee</option>
                                <option value="promote">Promote Employee</option>
                                <option value="demote">Demote Employee</option>
                                <option value="paycheck">View Paycheck</option>
                            </select>
                        </div>

                        <div id="job-action-form" style="display: none;">
                            <!-- Bill Customer -->
                            <div class="job-action-content" id="action-bill" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Customer ID</label>
                                    <input type="number" class="form-input" id="bill-customer-id" placeholder="Enter customer ID">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Amount</label>
                                    <input type="number" class="form-input" id="bill-amount" placeholder="$0.00">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Reason</label>
                                    <input type="text" class="form-input" id="bill-reason" placeholder="Service description">
                                </div>
                                <button class="btn btn-primary" id="submit-bill">
                                    <i class="fas fa-receipt"></i> Send Bill
                                </button>
                            </div>

                            <!-- Hire Employee -->
                            <div class="job-action-content" id="action-hire" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Player ID</label>
                                    <input type="number" class="form-input" id="hire-player-id" placeholder="Enter player ID">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Position</label>
                                    <input type="text" class="form-input" id="hire-position" placeholder="e.g., Junior Mechanic">
                                </div>
                                <button class="btn btn-primary" id="submit-hire">
                                    <i class="fas fa-user-plus"></i> Hire Employee
                                </button>
                            </div>

                            <!-- Fire Employee -->
                            <div class="job-action-content" id="action-fire" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Employee ID</label>
                                    <input type="number" class="form-input" id="fire-employee-id" placeholder="Enter employee ID">
                                </div>
                                <button class="btn btn-danger" id="submit-fire">
                                    <i class="fas fa-user-minus"></i> Fire Employee
                                </button>
                            </div>

                            <!-- Promote Employee -->
                            <div class="job-action-content" id="action-promote" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Employee ID</label>
                                    <input type="number" class="form-input" id="promote-employee-id" placeholder="Enter employee ID">
                                </div>
                                <button class="btn btn-primary" id="submit-promote">
                                    <i class="fas fa-arrow-up"></i> Promote Employee
                                </button>
                            </div>

                            <!-- Demote Employee -->
                            <div class="job-action-content" id="action-demote" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Employee ID</label>
                                    <input type="number" class="form-input" id="demote-employee-id" placeholder="Enter employee ID">
                                </div>
                                <button class="btn btn-secondary" id="submit-demote">
                                    <i class="fas fa-arrow-down"></i> Demote Employee
                                </button>
                            </div>

                            <!-- Paycheck -->
                            <div class="job-action-content" id="action-paycheck" style="display: none;">
                                <div class="list-item" style="cursor: default;">
                                    <div class="list-item-main">
                                        <div class="list-item-title">Last Paycheck</div>
                                        <div class="list-item-subtitle">Received 3 hours ago</div>
                                    </div>
                                    <div class="list-item-value" style="color: var(--success);">+$1,250</div>
                                </div>
                                <div class="list-item" style="cursor: default;">
                                    <div class="list-item-main">
                                        <div class="list-item-title">Next Paycheck</div>
                                        <div class="list-item-subtitle">In 21 hours</div>
                                    </div>
                                    <div class="list-item-value">~$1,400</div>
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; margin-top: 30px;">
                            <button class="btn btn-danger" id="quit-job-primary" style="flex: 1;">
                                <i class="fas fa-sign-out-alt"></i> Quit Primary
                            </button>
                            <button class="btn btn-danger" id="quit-job-secondary" style="flex: 1;">
                                <i class="fas fa-sign-out-alt"></i> Quit Secondary
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Food Ferry App -->
                <div class="app-view" id="food-app">
                    <div class="app-header">
                        <div class="app-title">Food Ferry</div>
                    </div>
                    <div class="app-content">
                        <div class="food-header">
                            <i class="fas fa-shipping-fast"></i>
                            <h2>Food Ferry</h2>
                            <p>Feeding You Faster</p>
                        </div>

                        <button class="btn" style="background: var(--orange); color: white; margin-bottom: 15px; box-shadow: 0 4px 16px rgba(255, 152, 0, 0.3);">
                            <i class="fas fa-list"></i> TOGGLE ORDERS
                        </button>

                        <button class="btn btn-danger" style="margin-bottom: 15px;">
                            <i class="fas fa-crown"></i> VIEW RANKINGS
                        </button>

                        <button class="btn btn-secondary" style="margin-bottom: 20px;">
                            <i class="fas fa-info-circle"></i> ABOUT
                        </button>

                        <div class="food-stats">
                            <div class="food-stat">
                                <div class="food-stat-value">3.0 ⭐</div>
                                <div class="food-stat-label">Average Rating</div>
                            </div>
                            <div class="food-stat">
                                <div class="food-stat-value">0 📋</div>
                                <div class="food-stat-label">Orders Completed</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Requestee App -->
                <div class="app-view" id="requestee-app">
                    <div class="app-header">
                        <div class="app-title">Requestee</div>
                    </div>
                    <div class="app-content">
                        <p style="color: var(--text-secondary); margin-bottom: 30px; line-height: 1.6; text-align: center;">Need a service done? Choose one of the options below to request someone from that job to enter the city to assist you.</p>

                        <button class="btn" id="request-mechanic" style="background: linear-gradient(135deg, #ff9800, #ff5722); color: white; margin-bottom: 15px; box-shadow: 0 4px 16px rgba(255, 152, 0, 0.3);">
                            <i class="fas fa-wrench"></i> REQUEST MECHANIC
                        </button>

                        <button class="btn" id="request-realtor" style="background: linear-gradient(135deg, #009688, #00bcd4); color: white; margin-bottom: 15px; box-shadow: 0 4px 16px rgba(0, 150, 136, 0.3);">
                            <i class="fas fa-home"></i> REQUEST REALTOR
                        </button>

                        <button class="btn" id="request-pdm" style="background: linear-gradient(135deg, #e91e63, #f06292); color: white; margin-bottom: 15px; box-shadow: 0 4px 16px rgba(233, 30, 99, 0.3);">
                            <i class="fas fa-car"></i> REQUEST PDM
                        </button>

                        <button class="btn" id="request-doctor" style="background: linear-gradient(135deg, #2196f3, #64b5f6); color: white; margin-bottom: 15px; box-shadow: 0 4px 16px rgba(33, 150, 243, 0.3);">
                            <i class="fas fa-user-md"></i> REQUEST DOCTOR
                        </button>

                        <button class="btn" id="request-lawyer" style="background: linear-gradient(135deg, #9c27b0, #ba68c8); color: white; margin-bottom: 15px; box-shadow: 0 4px 16px rgba(156, 39, 176, 0.3);">
                            <i class="fas fa-gavel"></i> REQUEST LAWYER
                        </button>

                        <button class="btn" id="request-general" style="background: linear-gradient(135deg, #4caf50, #66bb6a); color: white; margin-bottom: 20px; box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);">
                            <i class="fas fa-hands-helping"></i> GENERAL REQUEST
                        </button>

                        <p style="color: var(--text-secondary); font-size: 13px; line-height: 1.5; text-align: center; padding: 15px; background: var(--bg-secondary); border-radius: 10px;">
                            When making a request, your name and phone number will be shared publicly.
                        </p>
                    </div>
                </div>

                <!-- Settings App -->
                <div class="app-view" id="settings-app">
                    <div class="app-header">
                        <div class="app-title">Settings</div>
                    </div>
                    <div class="app-content">
                        <!-- Phone Number -->
                        <div class="list-item" style="cursor: default;">
                            <div class="list-item-main">
                                <div class="list-item-title">Your Phone Number</div>
                                <div class="list-item-subtitle" id="settings-phone-number">555-1234</div>
                            </div>
                        </div>

                        <h3 style="color: var(--text-secondary); margin: 25px 0 15px; font-size: 13px; text-transform: uppercase; letter-spacing: 1px;">Appearance</h3>

                        <!-- Theme Toggle -->
                        <div class="list-item" style="cursor: default;">
                            <div class="list-item-main">
                                <div class="list-item-title">Theme</div>
                                <div class="list-item-subtitle">Choose light or dark mode</div>
                            </div>
                            <select class="form-select" id="theme-select" style="width: auto; padding: 8px 12px; margin: 0;">
                                <option value="dark">Dark</option>
                                <option value="light">Light</option>
                            </select>
                        </div>

                        <!-- Wallpaper -->
                        <div class="form-group" style="background: var(--bg-secondary); padding: 15px; border-radius: 12px;">
                            <label class="form-label">Custom Wallpaper</label>
                            <input type="text" class="form-input" id="wallpaper-url" placeholder="Enter ImgBB image URL" style="margin: 0 0 10px 0;">
                            <div style="display: flex; gap: 8px;">
                                <button class="btn btn-primary" id="apply-wallpaper" style="flex: 1; padding: 10px; margin: 0;">
                                    Apply
                                </button>
                                <button class="btn btn-secondary" id="reset-wallpaper" style="flex: 1; padding: 10px; margin: 0;">
                                    Reset
                                </button>
                            </div>
                        </div>

                        <h3 style="color: var(--text-secondary); margin: 25px 0 15px; font-size: 13px; text-transform: uppercase; letter-spacing: 1px;">Notifications</h3>

                        <!-- Notification Settings -->
                        <div class="list-item" style="cursor: default;">
                            <div class="list-item-main">
                                <div class="list-item-title">Show Notifications</div>
                                <div class="list-item-subtitle">Display app notifications</div>
                            </div>
                            <label style="position: relative; display: inline-block; width: 50px; height: 28px;">
                                <input type="checkbox" id="notifications-toggle" checked style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--bg-tertiary); transition: 0.3s; border-radius: 28px;"></span>
                                <span style="position: absolute; content: ''; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: 0.3s; border-radius: 50%;"></span>
                            </label>
                        </div>

                        <div class="list-item" style="cursor: default;">
                            <div class="list-item-main">
                                <div class="list-item-title">Notification Sound</div>
                                <div class="list-item-subtitle">Play sound on notification</div>
                            </div>
                            <label style="position: relative; display: inline-block; width: 50px; height: 28px;">
                                <input type="checkbox" id="notification-sound-toggle" checked style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--bg-tertiary); transition: 0.3s; border-radius: 28px;"></span>
                                <span style="position: absolute; content: ''; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: 0.3s; border-radius: 50%;"></span>
                            </label>
                        </div>

                        <h3 style="color: var(--text-secondary); margin: 25px 0 15px; font-size: 13px; text-transform: uppercase; letter-spacing: 1px;">System</h3>

                        <!-- Volume Control -->
                        <div class="form-group" style="background: var(--bg-secondary); padding: 15px; border-radius: 12px;">
                            <label class="form-label">Ringtone Volume</label>
                            <input type="range" id="volume-slider" min="0" max="100" value="70" style="width: 100%; margin: 0;">
                            <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 12px; color: var(--text-secondary);">
                                <span>0%</span>
                                <span id="volume-display">70%</span>
                                <span>100%</span>
                            </div>
                        </div>

                        <!-- Airplane Mode -->
                        <div class="list-item" style="cursor: default;">
                            <div class="list-item-main">
                                <div class="list-item-title">Airplane Mode</div>
                                <div class="list-item-subtitle">Disable all connections</div>
                            </div>
                            <label style="position: relative; display: inline-block; width: 50px; height: 28px;">
                                <input type="checkbox" id="airplane-toggle" style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--bg-tertiary); transition: 0.3s; border-radius: 28px;"></span>
                                <span style="position: absolute; content: ''; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: 0.3s; border-radius: 50%;"></span>
                            </label>
                        </div>

                        <h3 style="color: var(--text-secondary); margin: 25px 0 15px; font-size: 13px; text-transform: uppercase; letter-spacing: 1px;">About</h3>

                        <div class="list-item" style="cursor: default;">
                            <div class="list-item-main">
                                <div class="list-item-title">Version</div>
                                <div class="list-item-subtitle">Phone OS v2.5.0</div>
                            </div>
                        </div>

                        <button class="btn btn-danger" style="margin-top: 30px;">
                            <i class="fas fa-power-off"></i> Reset All Settings
                        </button>
                    </div>
                </div>
            </div>

            <div id="gesture"></div>

            <!-- Modal -->
            <div class="modal-overlay" id="modal">
                <div class="modal">
                    <div class="modal-title" id="modal-title">Confirm Action</div>
                    <div class="modal-message" id="modal-message">Are you sure?</div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="modal-cancel">Cancel</button>
                        <button class="btn btn-primary" id="modal-confirm">Confirm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const state = {
            balance: { bank: 16250, cash: 450 },
            currentApp: null,
            phoneNumber: '555-1234',
            modalCallback: null,
            callActive: false,
            callNumber: '',
            callDuration: 0,
            callInterval: null,
            currentConversation: null,
            settings: {
                theme: 'dark',
                wallpaper: null,
                notifications: true,
                notificationSound: true,
                volume: 70,
                airplaneMode: false
            },
            conversations: {
                '555-0202': [
                    { type: 'received', text: 'Hey, can you pick up my car?', time: '10:25 AM' },
                    { type: 'sent', text: 'Sure, what time?', time: '10:26 AM' },
                    { type: 'received', text: 'Just got the car back, thanks!', time: '11:42 AM' }
                ],
                '555-0303': [
                    { type: 'received', text: 'Need any repairs?', time: '9:15 AM' },
                    { type: 'sent', text: 'Can you fix my engine?', time: '9:16 AM' },
                    { type: 'received', text: 'Sure, I\'m free now', time: '9:17 AM' }
                ],
                '555-9999': [
                    { type: 'received', text: 'You won $1,000,000!', time: 'Yesterday' }
                ],
                '555-0101': [
                    { type: 'sent', text: 'Are we still meeting today?', time: '2:30 PM' },
                    { type: 'received', text: 'See you at the meeting', time: '2:45 PM' }
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const phoneWrapper = document.getElementById('phone-wrapper');
            const homeScreen = document.getElementById('home-screen');
            const apps = document.querySelectorAll('.app, .dock-app');
            const gesture = document.getElementById('gesture');
            const modal = document.getElementById('modal');
            const dynamicIsland = document.getElementById('dynamic-island');
            const islandEndCall = document.getElementById('island-end-call');

            // Time Update
            const updateTime = () => {
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                document.getElementById('time').textContent = `${hours}:${minutes}`;
            };
            updateTime();
            setInterval(updateTime, 60000);

            // Tab Navigation
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabName = btn.getAttribute('data-tab');
                    const parent = btn.closest('.app-view');
                    
                    parent.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    parent.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    btn.classList.add('active');
                    parent.querySelector(`#${tabName}`).classList.add('active');
                });
            });

            // Dynamic Island Functions
            const showDynamicIsland = (number) => {
                state.callActive = true;
                state.callNumber = number;
                state.callDuration = 0;
                
                document.getElementById('island-title').textContent = 'Calling...';
                document.getElementById('island-subtitle').textContent = number;
                dynamicIsland.classList.add('active');

                state.callInterval = setInterval(() => {
                    state.callDuration++;
                    const minutes = Math.floor(state.callDuration / 60);
                    const seconds = state.callDuration % 60;
                    document.getElementById('island-title').textContent = 'In Call';
                    document.getElementById('island-subtitle').textContent = `${number} • ${minutes}:${String(seconds).padStart(2, '0')}`;
                }, 1000);
            };

            const hideDynamicIsland = () => {
                state.callActive = false;
                state.callNumber = '';
                state.callDuration = 0;
                dynamicIsland.classList.remove('active');
                
                if (state.callInterval) {
                    clearInterval(state.callInterval);
                    state.callInterval = null;
                }
            };

            islandEndCall.addEventListener('click', () => {
                sendNUI('endCall');
                hideDynamicIsland();
                notify('Call ended');
            });

            // Navigation Functions
            const openApp = (appName) => {
                homeScreen.classList.add('hidden');
                const targetView = document.getElementById(`${appName}-app`);
                if (targetView) {
                    targetView.classList.add('active');
                    state.currentApp = appName;
                }
            };

            const closeApp = () => {
                if (state.currentApp) {
                    const currentView = document.getElementById(`${state.currentApp}-app`);
                    if (currentView) {
                        currentView.classList.remove('active');
                    }
                    state.currentApp = null;
                }
                
                // Close conversation view if open
                document.getElementById('messages-list-view').style.display = 'block';
                document.getElementById('conversation-view').style.display = 'none';
                
                homeScreen.classList.remove('hidden');
            };

            const closePhone = () => {
                phoneWrapper.style.display = 'none';
                document.body.style.display = 'none';
                sendNUI('phoneClosed');
            };

            // Event Listeners
            apps.forEach(app => {
                app.addEventListener('click', () => {
                    const appName = app.getAttribute('data-app');
                    if (appName) openApp(appName);
                });
            });

            gesture.addEventListener('click', () => {
                if (state.currentApp) closeApp();
                else closePhone();
            });

            // Phone App - Dialpad
            const phoneInput = document.getElementById('phone-input');
            const dialBtns = document.querySelectorAll('.dial-btn[data-num]');
            const clearBtn = document.getElementById('clear-btn');
            const callBtn = document.getElementById('call-btn');

            dialBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const num = btn.getAttribute('data-num');
                    state.phoneNumber += num;
                    phoneInput.value = state.phoneNumber;
                });
            });

            clearBtn.addEventListener('click', () => {
                state.phoneNumber = state.phoneNumber.slice(0, -1);
                phoneInput.value = state.phoneNumber;
            });

            callBtn.addEventListener('click', () => {
                if (state.phoneNumber) {
                    showModal('Make Call', `Call ${state.phoneNumber}?`, () => {
                        sendNUI('makeCall', { number: state.phoneNumber });
                        showDynamicIsland(state.phoneNumber);
                        hideModal();
                        state.phoneNumber = '';
                        phoneInput.value = '';
                    });
                }
            });

            // Settings App
            document.getElementById('settings-phone-number').textContent = state.phoneNumber;

            // Theme Toggle
            const themeSelect = document.getElementById('theme-select');
            themeSelect.value = state.settings.theme;
            themeSelect.addEventListener('change', (e) => {
                state.settings.theme = e.target.value;
                if (e.target.value === 'light') {
                    document.documentElement.style.setProperty('--bg-primary', '#f5f5f5');
                    document.documentElement.style.setProperty('--bg-secondary', '#ffffff');
                    document.documentElement.style.setProperty('--bg-tertiary', '#e0e0e0');
                    document.documentElement.style.setProperty('--text-primary', '#000000');
                    document.documentElement.style.setProperty('--text-secondary', '#666666');
                } else {
                    document.documentElement.style.setProperty('--bg-primary', '#0a0a0a');
                    document.documentElement.style.setProperty('--bg-secondary', '#1a1a1a');
                    document.documentElement.style.setProperty('--bg-tertiary', '#2a2a2a');
                    document.documentElement.style.setProperty('--text-primary', '#ffffff');
                    document.documentElement.style.setProperty('--text-secondary', '#a0a0a0');
                }
                sendNUI('updateSettings', { theme: e.target.value });
            });

            // Wallpaper
            const applyWallpaper = document.getElementById('apply-wallpaper');
            const resetWallpaper = document.getElementById('reset-wallpaper');
            const wallpaperUrl = document.getElementById('wallpaper-url');

            applyWallpaper.addEventListener('click', () => {
                const url = wallpaperUrl.value.trim();
                if (url) {
                    const wallpaper = document.getElementById('wallpaper');
                    wallpaper.style.backgroundImage = `url(${url})`;
                    wallpaper.style.backgroundSize = 'cover';
                    wallpaper.style.backgroundPosition = 'center';
                    wallpaper.style.opacity = '0.3';
                    state.settings.wallpaper = url;
                    sendNUI('updateSettings', { wallpaper: url });
                    notify('Wallpaper applied successfully');
                }
            });

            resetWallpaper.addEventListener('click', () => {
                const wallpaper = document.getElementById('wallpaper');
                wallpaper.style.backgroundImage = '';
                wallpaper.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                wallpaperUrl.value = '';
                state.settings.wallpaper = null;
                sendNUI('updateSettings', { wallpaper: null });
                notify('Wallpaper reset to default');
            });

            // Notifications Toggle
            const notificationsToggle = document.getElementById('notifications-toggle');
            notificationsToggle.checked = state.settings.notifications;
            notificationsToggle.addEventListener('change', (e) => {
                state.settings.notifications = e.target.checked;
                updateToggleStyle(notificationsToggle);
                sendNUI('updateSettings', { notifications: e.target.checked });
                notify(e.target.checked ? 'Notifications enabled' : 'Notifications disabled');
            });

            // Notification Sound Toggle
            const notificationSoundToggle = document.getElementById('notification-sound-toggle');
            notificationSoundToggle.checked = state.settings.notificationSound;
            notificationSoundToggle.addEventListener('change', (e) => {
                state.settings.notificationSound = e.target.checked;
                updateToggleStyle(notificationSoundToggle);
                sendNUI('updateSettings', { notificationSound: e.target.checked });
            });

            // Volume Slider
            const volumeSlider = document.getElementById('volume-slider');
            const volumeDisplay = document.getElementById('volume-display');
            volumeSlider.value = state.settings.volume;
            volumeSlider.addEventListener('input', (e) => {
                state.settings.volume = e.target.value;
                volumeDisplay.textContent = `${e.target.value}%`;
                sendNUI('updateSettings', { volume: e.target.value });
            });

            // Airplane Mode Toggle
            const airplaneToggle = document.getElementById('airplane-toggle');
            airplaneToggle.checked = state.settings.airplaneMode;
            airplaneToggle.addEventListener('change', (e) => {
                state.settings.airplaneMode = e.target.checked;
                updateToggleStyle(airplaneToggle);
                sendNUI('updateSettings', { airplaneMode: e.target.checked });
                notify(e.target.checked ? 'Airplane mode enabled' : 'Airplane mode disabled');
            });

            // Toggle Switch Styling Helper
            function updateToggleStyle(toggle) {
                const slider = toggle.nextElementSibling;
                const knob = slider.nextElementSibling;
                if (toggle.checked) {
                    slider.style.backgroundColor = 'var(--accent)';
                    knob.style.transform = 'translateX(22px)';
                } else {
                    slider.style.backgroundColor = 'var(--bg-tertiary)';
                    knob.style.transform = 'translateX(0)';
                }
            }

            // Initialize toggle styles
            [notificationsToggle, notificationSoundToggle, airplaneToggle].forEach(toggle => {
                updateToggleStyle(toggle);
            });

            // Phone App - Contacts
            const contactSearch = document.getElementById('contact-search');
            contactSearch.addEventListener('input', (e) => {
                const search = e.target.value.toLowerCase();
                document.querySelectorAll('.contact-item').forEach(item => {
                    const name = item.getAttribute('data-name').toLowerCase();
                    item.style.display = name.includes(search) ? 'flex' : 'none';
                });
            });

            document.querySelectorAll('.contact-call').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const item = e.target.closest('.contact-item');
                    const number = item.getAttribute('data-number');
                    const name = item.getAttribute('data-name');
                    sendNUI('makeCall', { number, name });
                    showDynamicIsland(number);
                    notify(`Calling ${name}...`);
                });
            });

            document.querySelectorAll('.contact-message').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const item = e.target.closest('.contact-item');
                    const name = item.getAttribute('data-name');
                    const number = item.getAttribute('data-number');
                    openConversation(name, number);
                });
            });

            // Contact Delete
            document.querySelectorAll('.contact-delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const item = e.target.closest('.contact-item');
                    const name = item.getAttribute('data-name');
                    const number = item.getAttribute('data-number');
                    
                    showModal('Delete Contact', `Delete ${name} from your contacts?`, () => {
                        item.remove();
                        sendNUI('deleteContact', { number, name });
                        notify(`${name} deleted from contacts`);
                    });
                });
            });

            // Phone App - Recents
            document.querySelectorAll('.recent-call button').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const number = e.target.closest('.recent-call').getAttribute('data-number');
                    sendNUI('makeCall', { number });
                    showDynamicIsland(number);
                    notify(`Calling ${number}...`);
                });
            });

            // Messages App
            const openConversation = (contact, number) => {
                state.currentConversation = number;
                document.getElementById('messages-list-view').style.display = 'none';
                document.getElementById('conversation-view').style.display = 'flex';
                document.getElementById('conversation-contact').textContent = contact;
                document.getElementById('conversation-number').textContent = number;
                
                // Load messages
                const messagesContainer = document.getElementById('messages-container');
                messagesContainer.innerHTML = '';
                
                const messages = state.conversations[number] || [];
                messages.forEach(msg => {
                    const bubble = document.createElement('div');
                    bubble.className = `message-bubble message-${msg.type}`;
                    bubble.innerHTML = `
                        <div>${msg.text}</div>
                        <div class="message-time">${msg.time}</div>
                    `;
                    messagesContainer.appendChild(bubble);
                });
                
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            };

            document.querySelectorAll('.message-thread').forEach(thread => {
                thread.addEventListener('click', () => {
                    const contact = thread.getAttribute('data-contact');
                    const number = thread.getAttribute('data-number');
                    openConversation(contact, number);
                });
            });

            document.getElementById('back-to-messages').addEventListener('click', () => {
                document.getElementById('messages-list-view').style.display = 'block';
                document.getElementById('conversation-view').style.display = 'none';
                state.currentConversation = null;
            });

            document.getElementById('send-message').addEventListener('click', () => {
                const input = document.getElementById('message-input');
                const text = input.value.trim();
                
                if (text && state.currentConversation) {
                    const messagesContainer = document.getElementById('messages-container');
                    const bubble = document.createElement('div');
                    bubble.className = 'message-bubble message-sent';
                    bubble.innerHTML = `
                        <div>${text}</div>
                        <div class="message-time">Just now</div>
                    `;
                    messagesContainer.appendChild(bubble);
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                    
                    sendNUI('sendMessage', { number: state.currentConversation, message: text });
                    input.value = '';
                }
            });

            document.getElementById('message-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    document.getElementById('send-message').click();
                }
            });

            // Message Search
            const messageSearch = document.getElementById('message-search');
            messageSearch.addEventListener('input', (e) => {
                const search = e.target.value.toLowerCase();
                document.querySelectorAll('.message-thread').forEach(thread => {
                    const contact = thread.getAttribute('data-contact').toLowerCase();
                    thread.style.display = contact.includes(search) ? 'flex' : 'none';
                });
            });

            // Bank App
            const transferBtn = document.getElementById('transfer-btn');
            transferBtn.addEventListener('click', () => {
                const id = document.getElementById('transfer-id').value;
                const amount = parseInt(document.getElementById('transfer-amount').value);

                if (!id || !amount || amount <= 0) {
                    notify('Please enter valid recipient and amount');
                    return;
                }

                if (amount > state.balance.bank) {
                    notify('Insufficient funds!');
                    return;
                }

                showModal('Transfer Money', `Send ${amount} to ${id}?`, () => {
                    sendNUI('transferMoney', { recipient: id, amount });
                    notify(`${amount} transferred successfully`);
                    document.getElementById('transfer-id').value = '';
                    document.getElementById('transfer-amount').value = '';
                });
            });

            // Twitter App
            const tweetText = document.getElementById('tweet-text');
            const tweetCount = document.getElementById('tweet-count');
            const postTweet = document.getElementById('post-tweet');

            tweetText.addEventListener('input', () => {
                const length = tweetText.value.length;
                tweetCount.textContent = `${length}/280`;
                tweetCount.style.color = length > 280 ? 'var(--danger)' : 'var(--text-secondary)';
            });

            postTweet.addEventListener('click', () => {
                const content = tweetText.value.trim();
                if (content && content.length <= 280) {
                    sendNUI('postTweet', { content });
                    notify('Tweet posted!');
                    tweetText.value = '';
                    tweetCount.textContent = '0/280';
                } else if (content.length > 280) {
                    notify('Tweet is too long!');
                }
            });

            // Ping App
            const sendPingBtn = document.getElementById('send-ping');
            sendPingBtn.addEventListener('click', () => {
                const targetId = document.getElementById('ping-target').value;
                if (targetId) {
                    showModal('Send Location', `Send your location to Player ${targetId}?`, () => {
                        sendNUI('sendPing', { playerId: targetId });
                        notify(`Location sent to Player ${targetId}`);
                        document.getElementById('ping-target').value = '';
                    });
                }
            });

           // Job App
			const jobStatusPrimary = document.getElementById('job-status-primary');
			const jobStatusSecondary = document.getElementById('job-status-secondary');
			const quitJobPrimary = document.getElementById('quit-job-primary');
			const quitJobSecondary = document.getElementById('quit-job-secondary');

			if (jobStatusPrimary) {
				jobStatusPrimary.addEventListener('change', (e) => {
				const status = e.target.value;
				sendNUI('setJobStatus', { job: 'primary', status });
				notify(status === 'on' ? 'Primary job: On duty' : 'Primary job: Off duty');
			});
		}

			if (jobStatusSecondary) {
				jobStatusSecondary.addEventListener('change', (e) => {
				const status = e.target.value;
				sendNUI('setJobStatus', { job: 'secondary', status });
				notify(status === 'on' ? 'Secondary job: On duty' : 'Secondary job: Off duty');
			});
		}

			if (quitJobPrimary) {
				quitJobPrimary.addEventListener('click', () => {
				showModal('Quit Primary Job', 'Are you sure you want to quit your primary job?', () => {
				sendNUI('quitJob', { job: 'primary' });
				notify('Primary job quit successfully');
			});
		});
	}

			if (quitJobSecondary) {
			quitJobSecondary.addEventListener('click', () => {
			showModal('Quit Secondary Job', 'Are you sure you want to quit your secondary job?', () => {
				sendNUI('quitJob', { job: 'secondary' });
				notify('Secondary job quit successfully');
			});
		});
	}

            // Requestee App
            const requestButtons = {
                'request-mechanic': { service: 'mechanic', name: 'Mechanic' },
                'request-realtor': { service: 'realtor', name: 'Realtor' },
                'request-pdm': { service: 'pdm', name: 'PDM Sales' },
                'request-doctor': { service: 'doctor', name: 'Doctor' },
                'request-lawyer': { service: 'lawyer', name: 'Lawyer' },
                'request-general': { service: 'general', name: 'General Service' }
            };

            Object.keys(requestButtons).forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    const { service, name } = requestButtons[btnId];
                    btn.addEventListener('click', () => {
                        showModal(`Request ${name}`, `Send a request for a ${name} to assist you?`, () => {
                            sendNUI('requestService', { service });
                            notify(`${name} request sent!`);
                        });
                    });
                }
            });

            // Modal Functions
            const showModal = (title, message, callback) => {
                document.getElementById('modal-title').textContent = title;
                document.getElementById('modal-message').textContent = message;
                modal.classList.add('active');
                state.modalCallback = callback;
            };

            const hideModal = () => {
                modal.classList.remove('active');
                state.modalCallback = null;
            };

            document.getElementById('modal-cancel').addEventListener('click', hideModal);
            document.getElementById('modal-confirm').addEventListener('click', () => {
                if (state.modalCallback) state.modalCallback();
                hideModal();
            });

            // Utility Functions
            const sendNUI = (action, data = {}) => {
                fetch(`https://YOUR_RESOURCE_NAME/${action}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                }).catch(err => console.error(`NUI Error (${action}):`, err));
            };

            const notify = (message) => {
                console.log('Notification:', message);
            };

            // NUI Message Handler
            window.addEventListener('message', (event) => {
                const { type, data } = event.data;

                switch(type) {
                    case 'phone:show':
                        phoneWrapper.style.display = 'block';
                        document.body.style.display = 'flex';
                        break;
                    case 'phone:hide':
                        closePhone();
                        break;
                    case 'phone:toggle':
                        if (phoneWrapper.style.display === 'block') {
                            closePhone();
                        } else {
                            phoneWrapper.style.display = 'block';
                            document.body.style.display = 'flex';
                        }
                        break;
                    case 'updateBalance':
                        if (data.bank !== undefined) state.balance.bank = data.bank;
                        if (data.cash !== undefined) state.balance.cash = data.cash;
                        break;
                    case 'newMessage':
                        notify(`New message from ${data.from}`);
                        break;
                    case 'callStarted':
                        if (data.number) showDynamicIsland(data.number);
                        break;
                    case 'callEnded':
                        hideDynamicIsland();
                        break;
                }
            });

            // Keyboard Handler
            document.addEventListener('keyup', (e) => {
                if (e.key === 'Escape') {
                    if (modal.classList.contains('active')) {
                        hideModal();
                    } else if (state.currentApp) {
                        closeApp();
                    } else {
                        closePhone();
                    }
                }
            });

            // FOR TESTING - Remove in production
            phoneWrapper.style.display = 'block';
            document.body.style.display = 'flex';
        });
    </script>
</body>
</html>